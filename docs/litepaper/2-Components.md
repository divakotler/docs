# Diva components
## Participants

### Stakers

Anyone can be a Staker by depositing **ETH** to the Diva smart contracts and will instantly receive **divETH** representing their deposit along with its staking rewards generated by the network over time.

Stakers are passive and have no duties towards the Diva protocol. They can use their divETH in the DeFi ecosystem as a liquid staking derivate. divETH accrues staking rewards continuously. The percentage of the rewards from Ethereum that will go to the stakers is set by the DAO, and is expected to be 90-100% of all staking rewards.

### Operators

An Operator is anyone maintaining the infrastructure for Diva protocol by running a node and providing some ETH as a bond.

When an Operator has enough collateral, their node can be selected to be part of a validator and receive validation duties. If fulfilled correctly, the Operator will gain a % of rewards, and if not fulfilled, they might lose part of their collateral.

While Stakers receive 90-100% of the staking yield, **an Operator can expect to earn higher APYs on their ETH**, because their bond is staked generating 100% yield, plus a potential allocation from the 0-10% collected from passive stakers.

This can result in an effective staking APY that's also higher to running a solo validator on Ethereum with 32 ETH.

With Diva, operators can run their DVTs with no technical complexity, more resiliency and from only 1 ETH.


### DIVA Holders

Anyone that holds DIVA tokens has voting rights to the Diva DAO, which is the only one that governs Diva.

Governance parameters are minimized to a set of parameters and ranges considered to be secure.

## Node

Node is a piece of software running on a machine. Operators need to run a node in their servers. The node works along Ethereum Execution and Consensus clients to support the diva infrastructure for the distributed validator to work. The nodes can maintain different key-shares that will represent a share in different distributed validator. Thanks to nodes, Diva can create a network that support the distributed validator. Nodes client as all Diva software is open source. It is delivered in several ways. As code, as docker image and as Dappnode package. A diva node will enable operators to seamlessly:

- Register as operator in Diva smart contracts.
- Sync the Consensus and execution clients and get them ready.
- Add key-shares by depositing 1 ETH each to be part of many distributed-validators.
- Perform the different duties for Diva and therefore for Ethereum.

## Diva P2P

Diva creates a P2P network between nodes for discovering purposes. After the discovery has been established, a direct connection is established between peers that perform validation duties together. The objective is to avoid the latency that a new P2P adds whilst being decentralized and censorship-resistant. Also, the P2P network allows the DKG to be performed fully decentralized.

## Diva DAO

Diva is governed by its community that is organized by the Diva DAO. Members of the Diva DAO hold DIVA tokens. Diva DAO has the following responsibilities:

- Raise and support governance proposals.
- Allocate ETH rewards and DIVA incentives.
- Set protocol parameters.
- Maintain the approved relayers for MEV-boost.

Public debate and transparency is key for a community. Diva Discord is a great tool to have a direct and immediate contact between community members.

Diva also has a formal governance forum to articulate discussion and find a way for everyone to contribute in many ways. But what will drive the proposals is the voting mechanism that allows the DAO to operate effectively.

`[how vote/governance processes will work]`

## Smart Contracts

`list the logic processes the SC handle`

The Smart Contract governs the economic incentives between all parties: reward distributions, incentives and penalties all have an impact, and can be partially adjusted by the DAO.

The Diva Smart Contract allows Stakers to deposit ETH and receive yield-accruing divETH 1:1. They also are useful for operators to register and deposit ETH for their new key-shares for them to participate in different distributed validators.

Whenever the Diva Smart Contract has a balance of 32 ETH, it coordinates with registered Nodes to generate a new Ethereum validator, and is able to request validator withdrawals.

Diva smart contracts are non-upgradeable. This is one of the features that allow the protocol to be more predictable and trustless. If an issue manifests within a smart contract, a protection mechanism is in place to avoid any mayor leak of the funds.

As any other validator, distributed validators need to perform the Ethereum duties. The Diva Smart Contract handles staking reward distributions to Operators, Stakers and the DAO based on the daily rewards. A poor performance from Operators will result in penalties applied towards their ETH balances, which includes the Operator's bond.

Diva's smart contracts are released open-source for full transparency.

## Oracle

The Ethereum blockchain is running in two separate chains: the execution layer and the consensus layer. The execution layer is where the blocks and transaction and smart contracts sit, while consensus layer is where the validation and consensus information takes place.

At the time of this writing, this two-layer separation makes it impossible for the Diva Smart Contract to access to the state of a validator. The Diva smart contract has no direct way to check how one its validators have been performing without checking the consensus layer.

The proposed EIP-4788 will solve this problem, by making it possible to communicate both layers.

However, until EIP-4788 is available, a less ideal solution is available by using oracles. We have selected Chainlink as an interim solution, given that it is the most decentralized and safe alternative to EIP-4788.

`ZKProofs is an alternative to Oracles that is being reviewed`


The duties of the oracle are:

- Check the distributed validator balances from the Consensus layer.
- Check how the distributed validator performed from the Consensus layer.
- Check the DIVA:ETH ratio (in case we go % deposit model as bod).
- Check the RANDAO from the Consensus layer.
